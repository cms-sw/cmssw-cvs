process TEST = {
  source = PoolSource { 
    untracked vstring fileNames = {
      # "file:/tmp/Filter_Y.root"
      # "file:/tmp/Filter_background.root"
    }
  }

  untracked PSet maxEvents = {untracked int32 input = 10}

  include "MuonAnalysis/MomentumScaleCalibration/test/CSA08_JPsi.cff"

  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
  include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
  include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"
  include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

  include "RecoMuon/TrackingTools/data/MuonServiceProxy.cff"


  include "Alignment/CommonAlignmentProducer/data/GlobalPosition_Fake.cff"
  include "MagneticField/Engine/data/uniformMagneticField.cfi"


  looper = MuScleFit {

    using MuonServiceProxy

    # Choose the kind of muons you want to run on
    # -------------------------------------------

    // global muons
    InputTag MuonLabel = muons
    int32 muonType = 1

    // standalone muons
    //InputTag MuonLabel = standAloneMuons:UpdatedAtVtx
    //int32 muonType = 2 

    // // tracker tracks
    // InputTag MuonLabel = generalTracks //ctfWithMaterialTracks
    // int32 muonType = 3 

    # Output settings
    # ---------------
    untracked string RootFileName = "MuScleFit.root"
    untracked int32 debug = 0

    # Likelihood settings
    # -------------------
    untracked int32 maxLoopNumber = 5


    # Fit parameters and fix flags (1 = use par)
    # ==========================================


    # The 8 parameters of BiasType=13 are respectively:
    # Pt scale, Pt slope, Eta slope, Eta quadr., 
    # phi ampl. mu+, phi phase mu+, phi ampl. mu-, phi phase mu-
    # ----------------------------------------------------------
    #int32 BiasType = 13
    #vdouble parBias  = {1., 0., 0., 0., 0.01, 1., 0.01, 1.5}

    # BiasType=0 means no bias to muon momenta
    # ----------------------------------------
    int32 BiasType  = 0
    vdouble parBias  = {}

    # SmearType=0 means no smearing applied to muon momenta
    # -----------------------------------------------------
    int32 SmearType = 0
    vdouble parSmear = {}

    # The six parameters of SmearType=4 are respectively:
    # Pt dep. of Pt res., |eta| dep. of Pt res., Phi res., |eta| res., 
    # |eta| dep. of |eta| res., Pt^2 dep. of Pt res.
    # ----------------------------------------------------------------
    # int32 SmearType = 4
    # vdouble parSmear = {0., 0., 0., 0., 0., 0.} 

    # The seven parResol parameters of resolfittype=5 are respectively:
    # Pt dep. of Pt res., |eta| dep. of Pt res., Phi res., |eta| res., 
    # Pt^2 dep. of Pt res., costant in eta res., phi dep. of phi res.
    # ----------------------------------------------------------------
    int32 ResolFitType = 5        
    vdouble parResol = {0.0085, 0.049, 0.0008, 0., 0.0067, 0.00001, 0.0002}
    vint32 parResolFix = {0, 0, 0, 0, 0, 0, 0} 
    vint32 parResolOrder = {0, 0, 0, 0, 0, 0, 0}

    # The four parameters of resolfittype=2 are respectively:
    # Pt dep. of Pt res., |eta| dep. of Pt res., Phi res., |eta| res.
    # ---------------------------------------------------------------
    # int32 ResolFitType = 2
    # vdouble parResol = {0.0076, 0.061, 0.0051, 0.0025}
    # vint32 parResolFix = {0, 0, 0, 0} 
    # vint32 parResolOrder = {0, 0, 0, 0}

    # The six parameters of resolfittype=4 are respectively:
    # Pt dep. of Pt res., |eta| dep. of Pt res., Phi res., |eta| res., 
    # |eta| dep of eta res., Pt^2 dep. of Pt res.
    # ----------------------------------------------------------------
    # int32 ResolFitType = 4        
    # vdouble parResol = {0.001, 0.001, 0.001, 0.001, 0.001, 0.0000001}
    # vint32 parResolFix = {0, 0, 0, 0, 0, 0} 
    # vint32 parResolOrder = {0, 0, 0, 0, 0, 0}

    # The 8 parameters of ScaleFitType=13 are respectively:
    # Pt scale, Pt slope, Eta slope, Eta quadr., 
    # phi ampl. mu+, phi phase mu+, phi ampl. mu-, phi phase mu-
    # ----------------------------------------------------------
    int32 ScaleFitType = 13       
    vdouble parScale = {1., 0., 0., 0., 0., 1.57, 0., 1.57}
    vint32 parScaleFix = {0, 1, 1, 1, 0, 0, 0, 0}
    vint32 parScaleOrder = {0, 0, 0, 0, 0, 0, 0, 0}

    # The parameter of BgrFitType=1 is the bgr fraction
    # -------------------------------------------------
    int32 BgrFitType   = 1        
    vdouble parBgr   = {0.05}
    vint32 parBgrFix   = {0}
    vint32 parBgrOrder   = {0}

    # The two parameters of BgrFitType=2 are respectively:
    # bgr fraction, (negative of) bgr exp. slope, bgr constant
    # --------------------------------------------------------
    # int32 BgrFitType   = 2        
    # vdouble parBgr   = {0.05, 0.001}
    # vint32 parBgrFix   = {0, 0}
    # vint32 parBgrOrder   = {0, 0}

    # The three parameters of BgrFitType=3 are respectively:
    # bgr fraction, (negative of) bgr exp. slope, bgr constant
    # --------------------------------------------------------
    # int32 BgrFitType   = 3        
    # vdouble parBgr   = {0.05, 0.001, 0.001}
    # vint32 parBgrFix   = {0, 0, 0}
    # vint32 parBgrOrder   = {0, 0, 0}

    # The resonances are to be specified in this order:
    # Z0, Y(3S), Y(2S), Y(1S), Psi(2S), J/Psi
    # -------------------------------------------------
    vint32 resfind = {0, 0, 0, 0, 0, 1}
    int32 FitStrategy = 2
    bool speedup = false
  }
}


