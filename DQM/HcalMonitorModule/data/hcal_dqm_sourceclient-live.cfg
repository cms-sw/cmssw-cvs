process HCALDQM = { 
	include "DQMServices/Core/data/DQM.cfg"
	replace DQM.collectorHost = "myhost"
	replace DQM.collectorPort = 9092

       include "DQM/HcalMonitorModule/data/HcalMonitorModule.cfi"
                replace hcalMonitor.DataFormatMonitor = true
                replace hcalMonitor.DigiMonitor = true
                replace hcalMonitor.HotCellMonitor = true
                replace hcalMonitor.DeadCellMonitor = true
	        replace hcalMonitor.RecHitMonitor = true
                replace hcalMonitor.TrigPrimMonitor = true

		replace hcalMonitor.MTCCMonitor = false
	        replace hcalMonitor.PedestalMonitor = false
	        replace hcalMonitor.LEDMonitor = false
                replace hcalMonitor.CaloTowerMonitor = false
		replace hcalMonitor.HcalAnalysis = false

      include "DQM/HcalMonitorClient/data/HcalMonitorClient.cfi"
                replace hcalClient.DataFormatClient = true
	    	replace hcalClient.DigiClient = true
	    	replace hcalClient.RecHitClient = true
	    	replace hcalClient.HotCellClient = true
       	    	replace hcalClient.DeadCellClient = true
                replace hcalClient.TrigPrimClient = true
    
            	replace hcalClient.CaloTowerClient = false
	    	replace hcalClient.LEDClient = false
        	replace hcalClient.PedestalClient = false
                replace hcalClient.baseHtmlDir="" // suppresses html output from HCalClient  

    include "DQM/HcalMonitorModule/data/Hcal_FrontierConditions.cff"
    replace GlobalTag.connect  = "frontier://Frontier/CMS_COND_20X_GLOBALTAG" 
    replace GlobalTag.globaltag = "CRUZET2_V2::All" 


	include "FWCore/MessageLogger/data/MessageLogger.cfi"

	include "EventFilter/HcalRawToDigi/data/HcalRawToDigi.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hbhe.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-ho.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hf.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-zdc.cfi"

	path p = { hcalDigis, horeco, hfreco, hbhereco, zdcreco, hcalMonitor, hcalClient, dqmEnv, dqmSaver }



	untracked PSet options = {
		untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
        }

	untracked PSet maxEvents = {untracked int32 input = -1 }

        source = EventStreamHttpReader {
        //string sourceURL = "http://cmsdisk1.cms:11100/urn:xdaq-application:service=storagemanager"
        string sourceURL = "http://srv-c2c07-19.cms:11100/urn:xdaq-application:service=storagemanager"
        int32 max_event_size = 7000000
        int32 max_queue_depth = 5
        untracked string consumerName = "HCAL DQM Consumer"
        untracked string consumerPriority = "normal"
        untracked int32 headerRetryInterval = 3
        untracked double maxEventRequestRate = 10
        untracked PSet SelectEvents = { vstring SelectEvents={"PhysicsPath"} }
       //untracked PSet SelectEvents = {vstring SelectEvents={"*"} }
        }
	

	#########################################################
 	#### BEGIN DQM Online Environment #######################
	#########################################################
	# use include file for dqmEnv dqmSaver
        include "DQMServices/Components/data/DQMEnvironment.cfi"
        replace dqmSaver.convention       = "Online"
        //replace dqmSaver.dirName          = "."
        replace dqmSaver.producer         = "DQM"
        replace dqmEnv.subSystemFolder    = "Hcal"

        //replace dqmSaver.dirName          = "/cms/mon/data/dropbox"
        //replace dqmSaver.fileName         = "Hcal"

       # optionally change fileSaving  conditions
       // replace dqmSaver.prescaleLS =   -1
       // replace dqmSaver.prescaleTime = -1 # in minutes
       // replace dqmSaver.prescaleEvt =  -1
       // replace dqmSaver.saveAtRunEnd = true
       // replace dqmSaver.saveAtJobEnd = false
       # will add switch to select histograms to be saved soon
   
    #########################################################
    #### END ################################################
    #########################################################
}
