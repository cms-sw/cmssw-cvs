process PRODHLT = {


 source = PoolSource{
    untracked vstring fileNames={'file:/home/eperez/ECAL/RegionalUnpack_131_HLT/src/EventFilter/EcalDigiToRaw/test/digitoraw_a0.root'}

    untracked int32 maxEvents = -1
  }


#----------------- Timing + end ------------------------
## HLT-specific timing (see HLT Twiki pages for details)
  include "HLTrigger/Timer/data/timer.cfi"


# This removes "info" messages :
 service = MessageLogger {
   # untracked vstring destinations    = { "cout" }
   # untracked PSet cout   = { untracked string threshold = "ERROR" }
 }


# -- This is in order to put the RawData from Pool to the memory :

 include "HLTrigger/HLTanalyzers/data/hltGetRaw.cfi"
 # replace hltGetRaw.RawDataCollection = source
 replace hltGetRaw.RawDataCollection = ecaldigitorawzerosup

                                                                                                                   
  # ----- For the EE Mapping :
  include "Geometry/EcalMapping/data/EcalMapping.cfi"

  es_source eegeom = EmptyESSource {
    string recordName = "EcalMappingRcd"
    vuint32 firstValid = { 1 }
    bool iovIsRunNotTime = false
  }



# --- Regional unpacking : this finds out the list of FEDS which
#     will be unpacked

include "RecoEgamma/EgammaHLTProducers/data/ecalRegionalEgammaFEDs.cfi"
replace ecalRegionalEgammaFEDs.debug = false



# ----------------------------------------------------------------
# --    ECAL Unpacking 

  module ecalRegionalEgammaDigis = EcalRawToDigiDev{
    
    # untracked string InputLabel="source"
    untracked string InputLabel="ecaldigitorawzerosup"
  
    # By default these are true  
     
     untracked bool eventPut        = false
     untracked bool memUnpacking    = false
     untracked bool headerUnpacking = false
     untracked bool srpUnpacking    = false
     untracked bool tccUnpacking    = true
     untracked bool feUnpacking     = true
     untracked bool syncCheck       = false 
 
    # Default values 
    # untracked uint numbXtalTSamples    = 10
    # untracked uint numbTriggerTSamples = 1  

    #untracked vint32 FEDs = {  610 }

    # if no 2 input vectors are specified, hard coded default DCCId:FedId correspondence:
    #                                            1:601, 2:602 ...      54:654
    # is used
    # For special mappings, use the two ordered vectors here below
    #   untracked vint32 orderedFedList      = {601, 602, 603, 604, 605, 606, 607, 608, 609, 610, 611, 612, 613, 614, 615, 616, 617, 618,
    #                                                                   619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634, 635, 636,
    #                                                                   637, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654  }
    #   untracked vint32 orderedDCCIdList = {  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  16,  17,  18,
    #                                                                   19,  20,  21,  22,  23,  24,  25,  26,  27,  28,  29,  30,  31,  32,  33,  34,  35,  36,
    #                                                                   37,  38,  39,  40,  41,  42,  43,  44,  45,  46, 47,  48,  49,  50,  51,  52,  53,  54}
    
    untracked bool DoRegional = true
    untracked string FedLabel = "ecalRegionalEgammaFEDs"

  }


  module PutecalRegionalEgammaDigis = EcalRawToDigiDev {

    # untracked string InputLabel="source"
    untracked string InputLabel="ecaldigitorawzerosup"

    # By default these are true

     untracked bool eventPut        = true
     untracked bool memUnpacking    = false
     untracked bool headerUnpacking = false
     untracked bool srpUnpacking    = false
     untracked bool tccUnpacking    = true
     untracked bool feUnpacking     = true
     untracked bool syncCheck       = false

    # Default values
    # untracked uint numbXtalTSamples    = 10
    # untracked uint numbTriggerTSamples = 1

    #untracked vint32 FEDs = {  610 }
    untracked string DCCMapFile = "EventFilter/EcalRawToDigiDev/data/DCCMap.txt"

    untracked bool DoRegional = true
    untracked string FedLabel = "ecalRegionalEgammaFEDs"
  }

# ----------------------------------------------------------------


# ----------------------------------------------------------------
# ----     EcalUncalibRecHits

include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"
include "RecoLocalCalo/EcalRecProducers/data/ecalLocalRecoSequence.cff"
replace ecalWeightUncalibRecHit.EBdigiCollection = PutecalRegionalEgammaDigis
replace ecalWeightUncalibRecHit.EEdigiCollection = PutecalRegionalEgammaDigis

# ----------------------------------------------------------------




path p= {hltGetRaw, ecalRegionalEgammaFEDs, ecalRegionalEgammaDigis, PutecalRegionalEgammaDigis, ecalWeightUncalibRecHit}




 module out = PoolOutputModule
 {
        untracked vstring outputCommands =
        {
      "drop *",
      "keep edmEventTime_*_*_*"
        # "keep *"
        }
        untracked string fileName = "ForTiming.root"
	# untracked PSet SelectEvents = { vstring SelectEvents = { "filterpath" } }
 }


 endpath ep = {myTimer, out}
 
}
