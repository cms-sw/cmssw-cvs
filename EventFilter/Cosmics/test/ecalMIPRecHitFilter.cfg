process TESTECALMIPFILTER = { 

    include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerMapping.cfi"
    include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerData.cfi"  

    include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
    include "Geometry/EcalCommonData/data/EcalOnly.cfi"
    include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

    #source = EmptySource { }
    source = PoolSource {
    untracked uint32 skipEvents = 0
      untracked vstring fileNames = {
          '/store/data/GlobalCruzet1/A/000/000/000/RAW/0004/041C1121-C71B-DD11-A4D4-001617E30F46.root'
      }
    untracked bool   debugFlag     = true
    }
    untracked PSet maxEvents = {untracked int32 input = 500}

    #es_source src1 = EcalTrivialConditionRetriever{
    # untracked vdouble amplWeights = { -0.333, -0.333, -0.333,
    #                                    0.000,  0.000,  1.000,
    #                                    0.000,  0.000,  0.000,  0.000 }
    # untracked vdouble pedWeights  = {  0.333,  0.333,  0.333,
    #                                    0.000,  0.000,  0.000,
    #                                    0.000,  0.000,  0.000,  0.000 }
    # untracked vdouble jittWeights = {  0.040,  0.040,  0.040,
    #                                    0.000,  1.320, -0.050,
    #                                   -0.500, -0.500, -0.400,  0.000 }
    # untracked double adcToGeVEBConstant = 0.0081475
	# untracked string  channelStatusFile = "CaloOnlineTools/EcalTools/data/listCRUZET.v1.hashed.trivial.txt_gio"
    #}
    include "CalibCalorimetry/EcalLaserCorrection/data/ecalLaserCorrectionService.cfi"

	include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
    replace GlobalTag.globaltag = "CRUZET_V2::All"

    include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"
    replace EcalTrivialConditionRetriever.producedEcalWeights = false
    replace EcalTrivialConditionRetriever.producedEcalPedestals = true
    replace EcalTrivialConditionRetriever.producedEcalIntercalibConstants = false
    replace EcalTrivialConditionRetriever.producedEcalIntercalibErrors = false
    replace EcalTrivialConditionRetriever.producedEcalGainRatios = false
    replace EcalTrivialConditionRetriever.producedEcalADCToGeVConstant = false
    replace EcalTrivialConditionRetriever.producedEcalLaserCorrection = false
    #Put this to true to read channel status from file 
    replace EcalTrivialConditionRetriever.producedChannelStatus = true
    replace EcalTrivialConditionRetriever.channelStatusFile ="CalibCalorimetry/EcalTrivialCondModules/data/listCRUZET.v1.hashed.trivial.txt_gio"
    es_prefer = EcalTrivialConditionRetriever{}
	
	
     untracked PSet options = {
         untracked bool wantSummary = true  # default is false
     }
    #service = Timing { }     
    service = TimerService {}

    module ecalUncalibRecHit = ecalFixedAlphaBetaFitUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalFixedAlphaBetaFitUncalibRecHit.cfi"
    replace ecalUncalibRecHit.EBdigiCollection = ecalEBunpacker:ebDigis
    replace ecalUncalibRecHit.EEdigiCollection = ecalEBunpacker:eeDigis

    include "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
    replace ecalRecHit.EBuncalibRecHitCollection = ecalUncalibRecHit:EcalUncalibRecHitsEB
    replace ecalRecHit.EEuncalibRecHitCollection = ecalUncalibRecHit:EcalUncalibRecHitsEE
	replace ecalRecHit.ChannelStatusToBeExcluded={1}

    include "EventFilter/Cosmics/data/ecalMIPRecHitFilter.cfi"
    replace ecalMIPRecHitFilter.maskedChannels           = {30501,17255,32705,20040,13485,47137,42803,56473,6972,61195,	141,16002,33101,23286,10070,14675,277,1358,999,16210, 28472, 414 , 13024, 1896 , 6932 , 14502, 3713 , 6972 , 21013, 5532 , 10221, 141 , 16002, 13485, 3049 ,	30079, 26832, 17107, 8108 , 14636, 23286, 20040, 30501, 1358 , 	277 , 999 , 14675, 14663, 24060, 7507 , 7152 ,	17255, 10070, 42125, 45736, 46478, 46889, 39717, 46555, 51628, 	33280, 49867, 52058, 52052, 61058, 49189, 49217,34853, 40247, 42407, 54659, 56818, 32705, 36669, 56473, 42805, 42803, 47137, 33101, 40306, 61195, 13485, 6972 , 42803, 56473}

    path p = {ecalEBunpacker, ecalUncalibRecHit,ecalRecHit,  ecalMIPRecHitFilter }


}
