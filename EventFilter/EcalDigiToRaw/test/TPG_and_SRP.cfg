
process TPG = {


 source = PoolSource{
	    untracked vstring fileNames = {'rfio:/castor/cern.ch/user/e/eperez/single_e_544354.root'}
            untracked int32 maxEvents = 10
 }




# ----- To produce the ecalTriggerPrimitiveDigis :

  # include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"
  es_source = EcalTrivialConditionRetriever {
  }

  include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis.cff"

  replace ecalTriggerPrimitiveDigis.InstanceEB = ""
  replace ecalTriggerPrimitiveDigis.InstanceEE = ""
  replace ecalTriggerPrimitiveDigis.Label = "ecalUnsuppressedDigis"


# ----- To produce the SR suppressed digis, together with the SR flags :

 include "SimCalorimetry/EcalSelectiveReadoutProducers/data/ecalDigis.cfi"

 replace ecalDigis.EBSRPdigiCollection = "SRPebDigis"
 replace ecalDigis.EESRPdigiCollection = "SRPeeDigis"
 replace ecalDigis.writeSrFlags = true



   module out = PoolOutputModule
   {
        untracked vstring outputCommands =
        {
    "drop *",
    "keep *_ecalUnsuppressedDigis_*_*",
    "keep *_ecalTriggerPrimitiveDigis_*_*",
    "keep *_ecalDigis_*_*",
    "keep *_SRPebDigis_*_*",
    "keep *_SRPeeDigis_*_*"
        }
       untracked string fileName = "TPG.root"
   }

path p = { ecalTriggerPrimitiveDigis, ecalDigis}

endpath ep = {out }


}



